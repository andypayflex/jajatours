---
import { urlForImage } from '../sanity/lib/image';

interface Props {
  node: {
    asset: any;
    alt?: string;
    caption?: string;
  };
}

const { node } = Astro.props;
const imageUrl = urlForImage(node.asset).width(800).url();
---

<figure>
  <img src={imageUrl} alt={node.alt || ''} loading="lazy" />
  {node.caption && <figcaption>{node.caption}</figcaption>}
</figure>

<style>
  figure {
    margin: 2rem 0;
  }

  img {
    width: 100%;
    height: auto;
    display: block;
  }

  figcaption {
    margin-top: 0.5rem;
    font-size: 0.9rem;
    color: #666;
    font-style: italic;
  }
</style>
