---
phase: 01-foundation-and-performance
plan: 03
type: execute
wave: 3
depends_on: ["02"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "Built site output is under 500KB total page weight"
    - "Responsive images are generated in AVIF and WebP formats"
    - "Page renders correctly on mobile viewport (375px width)"
    - "Navigation hamburger menu works on mobile"
    - "No JavaScript is shipped to the client"
  artifacts: []
  key_links: []
---

<objective>
Verify the built site meets Phase 1 performance and mobile-responsiveness requirements. Run automated checks on build output, then have the user visually confirm mobile rendering and touch interaction.

Purpose: Confirm the foundation is solid before moving to Phase 2. Catch performance regressions or mobile rendering issues early, while the site is simple and easy to fix.
Output: Verified build output meeting performance budget. Human-confirmed mobile responsiveness.
</objective>

<execution_context>
@/Users/andydev/.claude/get-shit-done/workflows/execute-plan.md
@/Users/andydev/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-and-performance/01-01-SUMMARY.md
@.planning/phases/01-foundation-and-performance/01-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Automated build output verification</name>
  <files></files>
  <action>
    Run from the project root:

    1. Build the site:
       ```
       npm run build
       ```

    2. Measure total page weight:
       Calculate the total size of dist/index.html and all assets it references (CSS, images for above-the-fold). Use `du -sh dist/` for total and `find dist/ -name "*.html" -o -name "*.css" | xargs wc -c` for HTML+CSS size.

       Performance budget check:
       - Total HTML + CSS should be well under 100KB
       - Individual image variants should be under 200KB each
       - Total page weight for first load (HTML + CSS + largest image) must be under 500KB

    3. Verify responsive image output:
       List image files in dist/_astro/ directory. Confirm:
       - Multiple width variants exist (400px, 800px, 1200px widths)
       - AVIF format files exist (.avif)
       - WebP format files exist (.webp)
       - Original JPEG fallback exists

    4. Verify zero JavaScript:
       ```
       find dist/ -name "*.js" | wc -l
       ```
       Result must be 0 (or only Astro's minimal runtime if sitemap needs it — but for static sites, should be zero).

    5. Check HTML output quality:
       - dist/index.html contains <picture> element with <source> tags for avif and webp
       - dist/index.html contains viewport meta tag
       - dist/index.html contains meta description
       - dist/index.html does NOT contain any <script> tags
       - dist/index.html contains system-ui in CSS (either inline or linked)

    6. Report findings:
       Print a summary table of all checks (pass/fail) and measurements (sizes in KB).
       If any check fails, note what needs fixing.
  </action>
  <verify>
    All 5 automated checks pass:
    - Page weight under 500KB
    - Responsive image variants exist (AVIF + WebP + JPEG, multiple widths)
    - Zero JavaScript files
    - HTML contains picture element with source tags
    - HTML contains viewport meta and description
  </verify>
  <done>
    Build output verified: under 500KB page weight, responsive images in 3 formats at 3 widths, zero JavaScript, proper HTML meta tags.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
    Complete mobile-first homepage with:
    - Responsive hero image (AVIF/WebP/JPEG with automatic format selection)
    - CSS-only hamburger navigation (no JavaScript)
    - Touch-friendly tap targets (44px minimum)
    - System fonts (no web font downloads)
    - Adventure tourism color scheme (forest green + warm gold)
    - Feature cards grid (1 column mobile, 3 columns desktop)
    - Footer with contact info
  </what-built>
  <how-to-verify>
    1. Start the preview server: `npm run preview` (serves the built site on localhost:4321)
    2. Open http://localhost:4321 in your browser

    Mobile check (use browser DevTools responsive mode or actual phone):
    3. Set viewport to 375px width (iPhone SE)
    4. Verify: Navigation shows hamburger menu icon
    5. Tap/click the hamburger — nav links should slide out
    6. Verify: Hero image displays at full width, text overlay is readable
    7. Verify: Feature cards stack in single column
    8. Verify: All buttons/links are easy to tap (not tiny)
    9. Scroll to footer — verify it's readable and well-spaced

    Desktop check:
    10. Expand viewport to 1200px+
    11. Verify: Navigation shows horizontal links (no hamburger)
    12. Verify: Feature cards display in 3-column grid
    13. Verify: Footer displays in multi-column layout

    Performance check:
    14. Open DevTools Network tab, disable cache, reload
    15. Verify: No web font requests (no fonts.googleapis.com, no .woff files)
    16. Verify: Images served as WebP or AVIF (check Content-Type in Network tab)
  </how-to-verify>
  <resume-signal>Type "approved" to confirm the site looks good on mobile and desktop, or describe any issues that need fixing.</resume-signal>
</task>

</tasks>

<verification>
1. Automated performance checks all pass (page weight, image formats, zero JS)
2. Human confirms mobile rendering is correct (navigation, layout, images)
3. Human confirms desktop rendering is correct (navigation, grid layout)
4. Human confirms no web font downloads observed
</verification>

<success_criteria>
- Build output under 500KB total page weight
- Responsive images generated in AVIF, WebP, JPEG at multiple widths
- Zero JavaScript shipped
- Human approves mobile and desktop rendering
- Phase 1 success criteria met: fast loads, mobile responsive, responsive images, ready for HTTPS (Netlify deployment)
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-and-performance/01-03-SUMMARY.md`
</output>
